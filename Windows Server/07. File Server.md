# File Server
기본적으로 File Server라고 하면 쉽게 NAS를 생각하시면 됩니다. NAS는 장비를 구매하시어 사용하게 되면 기본적으로 하드웨어에 맞춰서 OS가 설치되어 있지만 Windows Server에서도 이런 기능을 제공합니다.  
그렇다면 실제로 이런 기능을 어디서 많이 사용할까요? VDI 환경에서 많이 사용하며, 대규모 Client가 있는 환경에서 네트워크 환경의 파일 스토리지를 할당하며 이에 대한 Access 관리는 AD와 융합하여 사용하게 됩니다.

![](./MD_Images/07_00001.jpg)
_File Server 운영 시, 위 역할을 설치하여 운영합니다._

# 1.고급 SMB 공유 폴더 생성



# 2. Quotas(할당량)
Quotas는 공유 폴더에 데이터를 제한하여 저장할 수 있도록 해주는 기능입니다.

![](./MD_Images/07_02002.jpg)
* `서버 관리자` -> `도구` -> `파일 서버 리소스 관리자`로 이동합니다.

<br>

![](./MD_Images/07_02003.jpg)
* 파일 리소스 관리자 탭에서 `할당량 관리` -> `할당량`으로 이동합니다.
* 이동한 후, 중앙 UI에 우 클릭한 후, `할당량 만들기`로 이동합니다.

<br>

![](./MD_Images/07_02004.jpg)
1. 할당량을 적용할 공유 폴더의 로컬 경로를 설정합니다.
2. 기본적인 Quotas Template이 없을 경우, 사용자 속성에서 새로운 템플릿을 생성합니다.
3. 기본 제공하는 템플릿을 기반으로 선택하여 새로운 템플릿을 생성합니다.
4. 공유 폴더가 사용할 수 있는 크기를 제한합니다.
    * __하드 할당량__ : 공유 폴더가 제한된 크기를 지키도록 합니다.
    * __소프트 할당량__ : 제한된 크기를 초과할 수 있도록 하며, 주 목적은 사용량 모니터링입니다.
5. 할당량에 도달하기 전 트리거로 생성할 알림 임계값을 추가합니다.

<br>

![](./MD_Images/07_02005.jpg)
* 할당량에 도달하기 전 임계값을 퍼센트로 설정합니다.
* 알림을 선택할 방법이 여러 가지 있으며, 일반적으로는 이벤트 로그로 많이 합니다.

<br>

![](./MD_Images/07_02006.jpg)
* 사용자 지정 Quotas Template을 작성하여 생성하게 되면, 위와 같이 할당량 속성이 반영됩니다.

<br>

![](./MD_Images/07_02007.jpg)
* 신규로 만든 Template을 추후에 사용할 수 있도록 Template 이름을 설정합니다.

<br>

![](./MD_Images/07_02008.jpg)
* 이렇게 최종적으로 Quotas를 적용하게 되면 위와 같이 출력되게 됩니다.

<br>

## 템플릿은 유지할 상태로 공유 폴더의 할당량을 변경할 수 있을까?
![](./MD_Images/07_02009.jpg)
* 정답은 가능합니다. 할당량을 변경하게 되면 `제햔` 탭이 변경된 할당량으로 변경됩니다.
* 하지만 템플릿은 여전히 1.5GByte에 대한 템플릿이기 때문에 `템플릿 일치` 탭에서는 아니요로 변하게 됩니다.

<br>

## 템플릿 변경
![](./MD_Images/07_02010.jpg)
* 새로 생성하였던 템플릿의 할당량도 변경할 수 있습니다.
* 변경된 템플릿을 사용하는 모든 공유 폴더들을 템플릿과 동일하게 한 번에 설정하고 싶을 경우에는 `파생된 모든 할당량에 템플릿 적용`을 선택합니다.

<br>

![](./MD_Images/07_02011.jpg)
* 위와 같이 설정하게 되면 모든 공유 폴더들의 설정이 변경되어지며, 템플릿과 일치되게 됩니다.

<br>

# 3. File Screen